{% extends 'core/base.html' %}
{% load static %}
{% load tags %}
{% block title %} Meu Contato | Minha conta {% endblock %}
{% block content %}

{% include 'core/menu.html' %}
{% include 'core/mensagens.html' %}

<div>
    <h2 class="text-center my-5 display-4">Minha conta</h2>
    <p class="fs-4">Dados da assinatura</p>
    {% if assinaturas %}
    <table class="table my-5">
        <thead>
            <tr>
                <th>Tipo</th>
                <th>Status</th>
                <th>Início</th>
                <th>Mensalidade</th>
                <th>Próxima cobrança</th>
                <th class="text-center">Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for assinatura in assinaturas %}
            <tr>
                <td>Individual</td>
                <td>{{assinatura.status|translate}}</td>
                <td>{{assinatura.start_date}}</td>
                <td>{{assinatura.valor}}</td>
                <td>{{assinatura.next_payment_date}}</td>
                {% if assinatura.status == 'authorized' %}
                <td class="text-center">
                    <a href="{% url 'assinaturas:cancelar' assinatura.id %}" class="btn text-danger"><i class="bi bi-trash3"></i></a>
                    <a href="{% url 'assinaturas:atualizar-cartao' assinatura.id %}" class="btn text-success"><i class="bi bi-credit-card-fill"></i></a>
                </td>
                {% else %}
                <td></td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="fs-5">Você ainda não possui nenhuma assinatura. </p>
    {% endif %}

</div>

{% endblock %}